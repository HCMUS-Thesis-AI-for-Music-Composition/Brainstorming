(()=>{var e={72378:(e,r,t)=>{e=t.nmd(e);var n="__lodash_hash_undefined__",s=9007199254740991,o="[object Arguments]",a="[object AsyncFunction]",i="[object Function]",g="[object GeneratorFunction]",c="[object Null]",l="[object Object]",m="[object Proxy]",u="[object Undefined]",A=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f[o]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f[i]=f["[object Map]"]=f["[object Number]"]=f[l]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1;var p="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,h="object"==typeof self&&self&&self.Object===Object&&self,b=p||h||Function("return this")(),w=r&&!r.nodeType&&r,v=w&&e&&!e.nodeType&&e,x=v&&v.exports===w,y=x&&p.process,_=function(){try{var e=v&&v.require&&v.require("util").types;return e||y&&y.binding&&y.binding("util")}catch(e){}}(),k=_&&_.isTypedArray;var j,E,T,I=Array.prototype,C=Function.prototype,O=Object.prototype,B=b["__core-js_shared__"],P=C.toString,S=O.hasOwnProperty,D=(j=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",L=O.toString,$=P.call(Object),M=RegExp("^"+P.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=x?b.Buffer:void 0,z=b.Symbol,F=b.Uint8Array,U=N?N.allocUnsafe:void 0,W=(E=Object.getPrototypeOf,T=Object,function(e){return E(T(e))}),R=Object.create,V=O.propertyIsEnumerable,q=I.splice,Z=z?z.toStringTag:void 0,K=function(){try{var e=we(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),J=N?N.isBuffer:void 0,G=Math.max,H=Date.now,Q=we(b,"Map"),X=we(Object,"create"),Y=function(){function e(){}return function(r){if(!Be(r))return{};if(R)return R(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}();function ee(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function re(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function te(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function ne(e){var r=this.__data__=new re(e);this.size=r.size}function se(e,r){var t=Ee(e),n=!t&&je(e),s=!t&&!n&&Ie(e),o=!t&&!n&&!s&&Se(e),a=t||n||s||o,i=a?function(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}(e.length,String):[],g=i.length;for(var c in e)!r&&!S.call(e,c)||a&&("length"==c||s&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ve(c,g))||i.push(c);return i}function oe(e,r,t){(void 0!==t&&!ke(e[r],t)||void 0===t&&!(r in e))&&ge(e,r,t)}function ae(e,r,t){var n=e[r];S.call(e,r)&&ke(n,t)&&(void 0!==t||r in e)||ge(e,r,t)}function ie(e,r){for(var t=e.length;t--;)if(ke(e[t][0],r))return t;return-1}function ge(e,r,t){"__proto__"==r&&K?K(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}ee.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},ee.prototype.delete=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},ee.prototype.get=function(e){var r=this.__data__;if(X){var t=r[e];return t===n?void 0:t}return S.call(r,e)?r[e]:void 0},ee.prototype.has=function(e){var r=this.__data__;return X?void 0!==r[e]:S.call(r,e)},ee.prototype.set=function(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=X&&void 0===r?n:r,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var r=this.__data__,t=ie(r,e);return!(t<0)&&(t==r.length-1?r.pop():q.call(r,t,1),--this.size,!0)},re.prototype.get=function(e){var r=this.__data__,t=ie(r,e);return t<0?void 0:r[t][1]},re.prototype.has=function(e){return ie(this.__data__,e)>-1},re.prototype.set=function(e,r){var t=this.__data__,n=ie(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new ee,map:new(Q||re),string:new ee}},te.prototype.delete=function(e){var r=be(this,e).delete(e);return this.size-=r?1:0,r},te.prototype.get=function(e){return be(this,e).get(e)},te.prototype.has=function(e){return be(this,e).has(e)},te.prototype.set=function(e,r){var t=be(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this},ne.prototype.clear=function(){this.__data__=new re,this.size=0},ne.prototype.delete=function(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,r){var t=this.__data__;if(t instanceof re){var n=t.__data__;if(!Q||n.length<199)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new te(n)}return t.set(e,r),this.size=t.size,this};var ce,le=function(e,r,t){for(var n=-1,s=Object(e),o=t(e),a=o.length;a--;){var i=o[ce?a:++n];if(!1===r(s[i],i,s))break}return e};function me(e){return null==e?void 0===e?u:c:Z&&Z in Object(e)?function(e){var r=S.call(e,Z),t=e[Z];try{e[Z]=void 0;var n=!0}catch(e){}var s=L.call(e);n&&(r?e[Z]=t:delete e[Z]);return s}(e):function(e){return L.call(e)}(e)}function ue(e){return Pe(e)&&me(e)==o}function Ae(e){return!(!Be(e)||function(e){return!!D&&D in e}(e))&&(Ce(e)?M:A).test(function(e){if(null!=e){try{return P.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function de(e){if(!Be(e))return function(e){var r=[];if(null!=e)for(var t in Object(e))r.push(t);return r}(e);var r=xe(e),t=[];for(var n in e)("constructor"!=n||!r&&S.call(e,n))&&t.push(n);return t}function fe(e,r,t,n,s){e!==r&&le(r,(function(o,a){if(s||(s=new ne),Be(o))!function(e,r,t,n,s,o,a){var i=ye(e,t),g=ye(r,t),c=a.get(g);if(c)return void oe(e,t,c);var m=o?o(i,g,t+"",e,r,a):void 0,u=void 0===m;if(u){var A=Ee(g),d=!A&&Ie(g),f=!A&&!d&&Se(g);m=g,A||d||f?Ee(i)?m=i:Pe(v=i)&&Te(v)?m=function(e,r){var t=-1,n=e.length;r||(r=Array(n));for(;++t<n;)r[t]=e[t];return r}(i):d?(u=!1,m=function(e,r){if(r)return e.slice();var t=e.length,n=U?U(t):new e.constructor(t);return e.copy(n),n}(g,!0)):f?(u=!1,p=g,h=!0?(b=p.buffer,w=new b.constructor(b.byteLength),new F(w).set(new F(b)),w):p.buffer,m=new p.constructor(h,p.byteOffset,p.length)):m=[]:function(e){if(!Pe(e)||me(e)!=l)return!1;var r=W(e);if(null===r)return!0;var t=S.call(r,"constructor")&&r.constructor;return"function"==typeof t&&t instanceof t&&P.call(t)==$}(g)||je(g)?(m=i,je(i)?m=function(e){return function(e,r,t,n){var s=!t;t||(t={});var o=-1,a=r.length;for(;++o<a;){var i=r[o],g=n?n(t[i],e[i],i,t,e):void 0;void 0===g&&(g=e[i]),s?ge(t,i,g):ae(t,i,g)}return t}(e,De(e))}(i):Be(i)&&!Ce(i)||(m=function(e){return"function"!=typeof e.constructor||xe(e)?{}:Y(W(e))}(g))):u=!1}var p,h,b,w;var v;u&&(a.set(g,m),s(m,g,n,o,a),a.delete(g));oe(e,t,m)}(e,r,a,t,fe,n,s);else{var i=n?n(ye(e,a),o,a+"",e,r,s):void 0;void 0===i&&(i=o),oe(e,a,i)}}),De)}function pe(e,r){return _e(function(e,r,t){return r=G(void 0===r?e.length-1:r,0),function(){for(var n=arguments,s=-1,o=G(n.length-r,0),a=Array(o);++s<o;)a[s]=n[r+s];s=-1;for(var i=Array(r+1);++s<r;)i[s]=n[s];return i[r]=t(a),function(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}(e,this,i)}}(e,r,Me),e+"")}var he=K?function(e,r){return K(e,"toString",{configurable:!0,enumerable:!1,value:(t=r,function(){return t}),writable:!0});var t}:Me;function be(e,r){var t,n,s=e.__data__;return("string"==(n=typeof(t=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?s["string"==typeof r?"string":"hash"]:s.map}function we(e,r){var t=function(e,r){return null==e?void 0:e[r]}(e,r);return Ae(t)?t:void 0}function ve(e,r){var t=typeof e;return!!(r=null==r?s:r)&&("number"==t||"symbol"!=t&&d.test(e))&&e>-1&&e%1==0&&e<r}function xe(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||O)}function ye(e,r){if(("constructor"!==r||"function"!=typeof e[r])&&"__proto__"!=r)return e[r]}var _e=function(e){var r=0,t=0;return function(){var n=H(),s=16-(n-t);if(t=n,s>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}(he);function ke(e,r){return e===r||e!=e&&r!=r}var je=ue(function(){return arguments}())?ue:function(e){return Pe(e)&&S.call(e,"callee")&&!V.call(e,"callee")},Ee=Array.isArray;function Te(e){return null!=e&&Oe(e.length)&&!Ce(e)}var Ie=J||function(){return!1};function Ce(e){if(!Be(e))return!1;var r=me(e);return r==i||r==g||r==a||r==m}function Oe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Be(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}function Pe(e){return null!=e&&"object"==typeof e}var Se=k?function(e){return function(r){return e(r)}}(k):function(e){return Pe(e)&&Oe(e.length)&&!!f[me(e)]};function De(e){return Te(e)?se(e,!0):de(e)}var Le,$e=(Le=function(e,r,t){fe(e,r,t)},pe((function(e,r){var t=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=Le.length>3&&"function"==typeof s?(n--,s):void 0,o&&function(e,r,t){if(!Be(t))return!1;var n=typeof r;return!!("number"==n?Te(t)&&ve(r,t.length):"string"==n&&r in t)&&ke(t[r],e)}(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++t<n;){var a=r[t];a&&Le(e,a,t,s)}return e})));function Me(e){return e}e.exports=$e},93150:function(e,r){var t,n,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[e],t=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",t=e=>{const t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,r=void 0){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const s=e=>e&&"object"==typeof e&&"function"==typeof e.then,o=(r,t)=>(...n)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||n.length<=1&&!1!==t.singleCallbackArg?r.resolve(n[0]):r.resolve(n)},a=e=>1==e?"argument":"arguments",i=(e,r)=>function(t,...n){if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((s,a)=>{if(r.fallbackToNoCallback)try{t[e](...n,o({resolve:s,reject:a},r))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),t[e](...n),r.fallbackToNoCallback=!1,r.noCallback=!0,s()}else r.noCallback?(t[e](...n),s()):t[e](...n,o({resolve:s,reject:a},r))}))},g=(e,r,t)=>new Proxy(r,{apply:(r,n,s)=>t.call(n,e,...s)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,r={},t={})=>{let n=Object.create(null),s={has:(r,t)=>t in e||t in n,get(s,o,a){if(o in n)return n[o];if(!(o in e))return;let m=e[o];if("function"==typeof m)if("function"==typeof r[o])m=g(e,e[o],r[o]);else if(c(t,o)){let r=i(o,t[o]);m=g(e,e[o],r)}else m=m.bind(e);else if("object"==typeof m&&null!==m&&(c(r,o)||c(t,o)))m=l(m,r[o],t[o]);else{if(!c(t,"*"))return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(r){e[o]=r}}),m;m=l(m,r[o],t["*"])}return n[o]=m,m},set:(r,t,s,o)=>(t in n?n[t]=s:e[t]=s,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(n,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(n,r)},o=Object.create(e);return new Proxy(o,s)},m=e=>({addListener(r,t,...n){r.addListener(e.get(t),...n)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}}),u=new n((e=>"function"!=typeof e?e:function(r){const t=l(r,{},{getContent:{minArgs:0,maxArgs:0}});e(t)})),A=new n((e=>"function"!=typeof e?e:function(r,t,n){let o,a,i=!1,g=new Promise((e=>{o=function(r){i=!0,e(r)}}));try{a=e(r,t,o)}catch(e){a=Promise.reject(e)}const c=!0!==a&&s(a);if(!0!==a&&!c&&!i)return!1;const l=e=>{e.then((e=>{n(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return l(c?a:g),!0})),d=({reject:t,resolve:n},s)=>{e.runtime.lastError?e.runtime.lastError.message===r?n():t(new Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?t(new Error(s.message)):n(s)},f=(e,r,t,...n)=>{if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,r)=>{const s=d.bind(null,{resolve:e,reject:r});n.push(s),t.sendMessage(...n)}))},p={devtools:{network:{onRequestFinished:m(u)}},runtime:{onMessage:m(A),onMessageExternal:m(A),sendMessage:f.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:f.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},h={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":h},services:{"*":h},websites:{"*":h}},l(e,p,t)};e.exports=t(chrome)}else e.exports=globalThis.browser},void 0===(s="function"==typeof t?t.apply(r,n):t)||(e.exports=s)}},r={};function t(n){var s=r[n];if(void 0!==s)return s.exports;var o=r[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";const e=(e,r)=>r.some((r=>e instanceof r));let r,n;const s=new WeakMap,o=new WeakMap,a=new WeakMap,i=new WeakMap,g=new WeakMap;let c={get(e,r,t){if(e instanceof IDBTransaction){if("done"===r)return o.get(e);if("objectStoreNames"===r)return e.objectStoreNames||a.get(e);if("store"===r)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return u(e[r])},set:(e,r,t)=>(e[r]=t,!0),has:(e,r)=>e instanceof IDBTransaction&&("done"===r||"store"===r)||r in e};function l(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...r){return e.apply(A(this),r),u(s.get(this))}:function(...r){return u(e.apply(A(this),r))}:function(r,...t){const n=e.call(A(this),r,...t);return a.set(n,r.sort?r.sort():[r]),u(n)}}function m(t){return"function"==typeof t?l(t):(t instanceof IDBTransaction&&function(e){if(o.has(e))return;const r=new Promise(((r,t)=>{const n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),n()},o=()=>{t(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)}));o.set(e,r)}(t),e(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,c):t)}function u(e){if(e instanceof IDBRequest)return function(e){const r=new Promise(((r,t)=>{const n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(u(e.result)),n()},o=()=>{t(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",o)}));return r.then((r=>{r instanceof IDBCursor&&s.set(r,e)})).catch((()=>{})),g.set(r,e),r}(e);if(i.has(e))return i.get(e);const r=m(e);return r!==e&&(i.set(e,r),g.set(r,e)),r}const A=e=>g.get(e);const d=["get","getKey","getAll","getAllKeys","count"],f=["put","add","delete","clear"],p=new Map;function h(e,r){if(!(e instanceof IDBDatabase)||r in e||"string"!=typeof r)return;if(p.get(r))return p.get(r);const t=r.replace(/FromIndex$/,""),n=r!==t,s=f.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!d.includes(t))return;const o=async function(e,...r){const o=this.transaction(e,s?"readwrite":"readonly");let a=o.store;return n&&(a=a.index(r.shift())),(await Promise.all([a[t](...r),s&&o.done]))[0]};return p.set(r,o),o}c=(e=>({...e,get:(r,t,n)=>h(r,t)||e.get(r,t,n),has:(r,t)=>!!h(r,t)||e.has(r,t)}))(c);var b=t(93150),w=t.n(b),v=t(72378),x=t.n(v);function y(e,r){try{return JSON.parse(e)}catch(e){return r}}const _=(e,r)=>e?`${e}--${r}`:r;function k(e="",r={},t=""){let n={name:_(t,e),data:r};return w().runtime.sendMessage(n)}function j(){const e={};return window.addEventListener("__automa-ext__",(({detail:r})=>{var t,n;r&&(t=e,n=r.type,Object.prototype.hasOwnProperty.call(t,n))&&e[r.type].forEach((e=>{e(r.data)}))})),{on:function(r,t){(e[r]=e[r]||[]).push(t)}}}function E(e,r={}){const t=new CustomEvent(`__automa-ext__${e}`,{detail:r});window.dispatchEvent(t)}window.addEventListener("DOMContentLoaded",(async()=>{try{document.body.setAttribute("data-atm-ext-installed",w().runtime.getManifest().version);const{workflows:e}=await w().storage.local.get("workflows"),r=await function(e,r,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const a=indexedDB.open(e,r),i=u(a);return n&&a.addEventListener("upgradeneeded",(e=>{n(u(a.result),e.oldVersion,e.newVersion,u(a.transaction),e)})),t&&a.addEventListener("blocked",(e=>t(e.oldVersion,e.newVersion,e))),i.then((e=>{o&&e.addEventListener("close",(()=>o())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),i}("automa",1,{upgrade(e){e.createObjectStore("store")}});await r.put("store",e,"workflows");const t=j();t.on("open-dashboard",(({path:e})=>{e&&k("open:dashboard",e,"background")})),t.on("open-workflow",(({workflowId:e})=>{e&&k("open:dashboard",`/workflows/${e}`,"background")})),t.on("add-workflow",(async({workflow:e})=>{try{const{workflows:r}=await w().storage.local.get("workflows"),t=((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,r)=>e+((r&=63)<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r>62?"-":"_")),""))(),n={...e,id:t,dataColumns:[],createdAt:Date.now(),table:e.table||e.dataColumns};n.drawflow="string"==typeof n.drawflow?y(n.drawflow,n.drawflow):n.drawflow,Array.isArray(r)?r.push(n):r[t]=n,await w().storage.local.set({workflows:r}),k("workflow:added",{workflowId:t,workflowData:n},"background")}catch(e){console.error(e)}})),t.on("add-team-workflow",(async({workflow:e})=>{let{teamWorkflows:r}=await w().storage.local.get("teamWorkflows"),t={...e,createdAt:Date.now(),table:e.table??[]};t.drawflow="string"==typeof t.drawflow?y(t.drawflow,t.drawflow):t.drawflow,r||(r={}),r[t.teamId]||(r[t.teamId]={});const n=r[t.teamId][e.id]||null;n&&(t=x()(n,t)),r[t.teamId][e.id]=t,await w().storage.local.set({teamWorkflows:r});const s=t.drawflow.nodes?.find((e=>"trigger"===e.label));s&&await k("workflow:register",{triggerBlock:s,workflowId:t.id},"background"),k("workflow:added",{workflowId:t.id,teamId:t.teamId,source:"team"},"background")})),t.on("check-team-workflow",(async({teamId:e,workflowId:r})=>{const{teamWorkflows:t}=await w().storage.local.get("teamWorkflows"),n=Boolean(t?.[e]?.[r]);window.dispatchEvent(new CustomEvent("__automa-team-workflow__",{detail:{exists:n}}))})),t.on("add-package",(async e=>{try{const{savedBlocks:r}=await w().storage.local.get("savedBlocks"),t=r||[];t.push({...e.package,createdAt:Date.now()}),await w().storage.local.set({savedBlocks:t}),k("dashboard:refresh-packages","","background")}catch(e){console.error(e)}})),t.on("update-package",(async e=>{const{savedBlocks:r}=await w().storage.local.get("savedBlocks"),t=r||[],n=t.findIndex((r=>r.id===e.id));-1!==n&&(Object.assign(t[n],e.package),await w().storage.local.set({savedBlocks:t}),k("dashboard:refresh-packages","","background"))})),t.on("send-message",(async({type:e,data:r})=>{if("package-installed"===e){const{savedBlocks:t}=await w().storage.local.get("savedBlocks");E(e,(t||[]).some((e=>e.id===r)))}else if("get-workflows"===e){E(e,(await w().storage.local.get("workflows")).workflows)}}))}catch(e){console.error(e)}})),window.addEventListener("user-logout",(()=>{w().storage.local.remove(["session","sessionToken"])})),window.addEventListener("app-mounted",(async()=>{try{const e="supabase.auth.token",r=y(localStorage.getItem(e),null),t=await w().storage.local.get(["session","sessionToken"]),n=async()=>{const e={session:r},t=r?.user?.user_metadata?.iss.includes("google.com"),{session:n,sessionToken:s}=await w().storage.local.get(["session","sessionToken"]);t&&(r&&r.user.id===n?.user.id||!s)&&(e.sessionToken={access:r.provider_token,refresh:r.provider_refresh_token}),t||w().storage.local.remove("sessionToken"),await w().storage.local.set(e)};if(r&&!t.session)await n();else if(r&&t.session)if(r.user.id!==t.session.id)await n();else{const r={...t.session};t.sessionToken&&(r.provider_token=t.sessionToken.access,r.provider_refresh_token=t.sessionToken.refresh),localStorage.setItem(e,JSON.stringify(r))}}catch(e){console.error(e)}}))})()})();